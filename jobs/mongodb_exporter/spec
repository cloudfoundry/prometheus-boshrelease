---
name: mongodb_exporter

packages:
  - mongodb_exporter

templates:
  bin/mongodb_exporter_ctl: bin/mongodb_exporter_ctl
properties:
  mongodb.user:
    description: "monitor user, need clusterMonitor role in admin db and read role in local db"
  mongodb.password: 
    description: "monitor user password"
  mongodb.collstats-colls:
   description: "List of comma separared databases.collections to get $collStats"
  mongodb.indexstats-colls:
    description: "List of comma separared databases.collections to get $indexStats"
  mongodb.uri:
    description: "Mongodb URI, format: [mongodb://][user:pass@]host1[:port1][,host2[:port2],...][/database][?options]"
  mongodb.global-conn-pool:
    description: "Use global connection pool instead of creating new pool for each http request."
  mongodb.direct-connect:
    description: "Whether or not a direct connect should be made. Direct connections are not valid if multiple hosts are specified or an SRV URI is used."
  web.listen-address:
    description: "Address to listen on for web interface and telemetry, defaults to 9216"
  web.telemetry-path:
    description: "Metrics expose path, defaults to /metrics"
  web.config:
   description: "Path to the file having Prometheus TLS config for basic auth"
  web.timeout-offset:
    description: "Offset to subtract from the request timeout in seconds, defaults to 1"
  log.level:
    description: "Only log messages with the given severity or above. Valid levels: [debug, info, warn, error, fatal]. defaults to error"
  mongodb.connect-timeout-ms:
    description: "Connection timeout in milliseconds, defaults to 5000"
  collector.exporter-metrics:
   description: "Enable collecting metrics about the exporter itself (process_*, go_*), defaults to true"
  collector.diagnosticdata:
    description: "Enable collecting metrics from getDiagnosticData"
  collector.replicasetstatus:
    description: "Enable collecting metrics from replSetGetStatus"
  collector.replicasetconfig:
    description: "Enable collecting metrics from replSetGetConfig"
  collector.dbstats:
    description: "Enable collecting metrics from dbStats"
  collector.dbstatsfreestorage:
   description: "Enable collecting free space metrics from dbStats"
  collector.topmetrics:
    description: "Enable collecting metrics from top admin command"
  collector.currentopmetrics:
    description: "Enable collecting metrics currentop admin command"
  collector.indexstats:
   description: "Enable collecting metrics from $indexStats"
  collector.collstats:
    description: "Enable collecting metrics from $collStats"
  collector.profile:
    description: "Enable collecting metrics from profile"
  collector.fcv:
    description: "Enable Feature Compatibility Version collector"
  collector.shards:
    description: "Enable collecting metrics from sharded Mongo clusters about chunks"
  collector.pbm:
   description: "Enable collecting metrics from Percona Backup for MongoDB"
  metrics.overridedescendingindex:
    description: "Enable descending index name override to replace -1 with _DESC"
  collect-all:
    description: "Enable all collectors. Same as specifying all --collector.<name>"
  collector.collstats-limit:
    description: "Disable collstats, dbstats, topmetrics and indexstats collector if there are more than <n> collections. 0=No limit, defaults to 0"
  collector.collstats-enable-details:
    description: "Enable collecting index details and wired tiger metrics from $collStats, defaults to false"
  collector.profile-time-ts:
    description: "Set time for scrape slow queries, defaults to 30s"
  collector.currentopmetrics-slow-time:
    description: "Set minimum time for registration queries, defaults to 1m"
  discovering-mode:
   description: "Enable autodiscover collections"
  compatible-mode:
    description: "Enable old mongodb-exporter compatible metrics"
  version:
   description: "Show version and exit"
  split-cluster:
    description: "Treat each node in cluster as a separate target"
